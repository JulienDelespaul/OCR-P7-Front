{"ast":null,"code":"var _jsxFileName = \"/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Posts.jsx\",\n    _s = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"../Api/axios\";\nimport useAuth from \"../hooks/useAuth\";\nimport usePostsRefresh from \"../hooks/usePostsRefresh\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Posts = () => {\n  _s();\n\n  const {\n    refresh\n  } = usePostsRefresh();\n  const [posts, setPosts] = useState();\n  const {\n    auth\n  } = useAuth();\n  useEffect(() => {\n    let isMounted = true;\n\n    const getPosts = async () => {\n      try {\n        const response = await axios.get(\"/post\", {\n          headers: {\n            Authorization: `Bearer ${auth.token}`\n          }\n        });\n        console.log(response.data);\n        const sortedPosts = response.data.sort((a, b) => {\n          return new Date(b.createdAt) - new Date(a.createdAt);\n        });\n        isMounted && setPosts(sortedPosts);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    getPosts();\n    return () => {\n      isMounted = false;\n    };\n  }, [refresh, auth.token]);\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    className: \"text-tertiary text-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"h-min mt-4 p-4 w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl\",\n      children: \"Posts List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 4\n    }, this), posts !== null && posts !== void 0 && posts.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: posts.map((post, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"h-min mt-4 p-4 w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-secondary m-4\",\n          children: post === null || post === void 0 ? void 0 : post.content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 39,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: (post === null || post === void 0 ? void 0 : post.imageUrl) && /*#__PURE__*/_jsxDEV(\"img\", {\n            src: post.imageUrl,\n            alt: \"post\",\n            className: \"h-80 mx-auto object-cover rounded-2xl\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 40,\n            columnNumber: 32\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 8\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\"Date de cr\\xE9ation : \", post === null || post === void 0 ? void 0 : post.createdAt]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 8\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 7\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No posts to display\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 33,\n    columnNumber: 3\n  }, this);\n};\n\n_s(Posts, \"3af0yd6jERVAJElKmJmTHZ3Nc/o=\", false, function () {\n  return [usePostsRefresh, useAuth];\n});\n\n_c = Posts;\nexport default Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["useState","useEffect","axios","useAuth","usePostsRefresh","Posts","refresh","posts","setPosts","auth","isMounted","getPosts","response","get","headers","Authorization","token","console","log","data","sortedPosts","sort","a","b","Date","createdAt","error","length","map","post","i","content","imageUrl"],"sources":["/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Posts.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"../Api/axios\";\nimport useAuth from \"../hooks/useAuth\";\nimport usePostsRefresh from \"../hooks/usePostsRefresh\";\n\nconst Posts = () => {\n\tconst { refresh } = usePostsRefresh();\n\tconst [posts, setPosts] = useState();\n\tconst { auth } = useAuth();\n\tuseEffect(() => {\n\t\tlet isMounted = true;\n\n\t\tconst getPosts = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\"/post\", { headers: { Authorization: `Bearer ${auth.token}` } });\n\t\t\t\tconsole.log(response.data);\n\t\t\t\tconst sortedPosts = response.data.sort((a, b) => {\n\t\t\t\t\treturn new Date(b.createdAt) - new Date(a.createdAt);\n\t\t\t\t});\n\t\t\t\tisMounted && setPosts(sortedPosts);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t};\n\t\tgetPosts();\n\n\t\treturn () => {\n\t\t\tisMounted = false;\n\t\t};\n\t}, [refresh, auth.token]);\n\n\treturn (\n\t\t<article className=\"text-tertiary text-lg\">\n\t\t\t<h2 className=\"h-min mt-4 p-4 w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl\">Posts List</h2>\n\t\t\t{posts?.length ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{posts.map((post, i) => (\n\t\t\t\t\t\t<li className=\"h-min mt-4 p-4 w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \" key={i}>\n\t\t\t\t\t\t\t<div className=\"bg-secondary m-4\">{post?.content}</div>\n\t\t\t\t\t\t\t<div>{post?.imageUrl && <img src={post.imageUrl} alt=\"post\" className=\"h-80 mx-auto object-cover rounded-2xl\" />}</div>\n\t\t\t\t\t\t\t<div>Date de cr√©ation : {post?.createdAt}</div>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<p>No posts to display</p>\n\t\t\t)}\n\t\t</article>\n\t);\n};\n\nexport default Posts;\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,eAAP,MAA4B,0BAA5B;;;AAEA,MAAMC,KAAK,GAAG,MAAM;EAAA;;EACnB,MAAM;IAAEC;EAAF,IAAcF,eAAe,EAAnC;EACA,MAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBR,QAAQ,EAAlC;EACA,MAAM;IAAES;EAAF,IAAWN,OAAO,EAAxB;EACAF,SAAS,CAAC,MAAM;IACf,IAAIS,SAAS,GAAG,IAAhB;;IAEA,MAAMC,QAAQ,GAAG,YAAY;MAC5B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAN,CAAU,OAAV,EAAmB;UAAEC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAASN,IAAI,CAACO,KAAM;UAAtC;QAAX,CAAnB,CAAvB;QACAC,OAAO,CAACC,GAAR,CAAYN,QAAQ,CAACO,IAArB;QACA,MAAMC,WAAW,GAAGR,QAAQ,CAACO,IAAT,CAAcE,IAAd,CAAmB,CAACC,CAAD,EAAIC,CAAJ,KAAU;UAChD,OAAO,IAAIC,IAAJ,CAASD,CAAC,CAACE,SAAX,IAAwB,IAAID,IAAJ,CAASF,CAAC,CAACG,SAAX,CAA/B;QACA,CAFmB,CAApB;QAGAf,SAAS,IAAIF,QAAQ,CAACY,WAAD,CAArB;MACA,CAPD,CAOE,OAAOM,KAAP,EAAc;QACfT,OAAO,CAACC,GAAR,CAAYQ,KAAZ;MACA;IACD,CAXD;;IAYAf,QAAQ;IAER,OAAO,MAAM;MACZD,SAAS,GAAG,KAAZ;IACA,CAFD;EAGA,CApBQ,EAoBN,CAACJ,OAAD,EAAUG,IAAI,CAACO,KAAf,CApBM,CAAT;EAsBA,oBACC;IAAS,SAAS,EAAC,uBAAnB;IAAA,wBACC;MAAI,SAAS,EAAC,0HAAd;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,EAEET,KAAK,SAAL,IAAAA,KAAK,WAAL,IAAAA,KAAK,CAAEoB,MAAP,gBACA;MAAA,UACEpB,KAAK,CAACqB,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,kBACV;QAAI,SAAS,EAAC,2HAAd;QAAA,wBACC;UAAK,SAAS,EAAC,kBAAf;UAAA,UAAmCD,IAAnC,aAAmCA,IAAnC,uBAAmCA,IAAI,CAAEE;QAAzC;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAA,UAAM,CAAAF,IAAI,SAAJ,IAAAA,IAAI,WAAJ,YAAAA,IAAI,CAAEG,QAAN,kBAAkB;YAAK,GAAG,EAAEH,IAAI,CAACG,QAAf;YAAyB,GAAG,EAAC,MAA7B;YAAoC,SAAS,EAAC;UAA9C;YAAA;YAAA;YAAA;UAAA;QAAxB;UAAA;UAAA;UAAA;QAAA,QAFD,eAGC;UAAA,qCAAyBH,IAAzB,aAAyBA,IAAzB,uBAAyBA,IAAI,CAAEJ,SAA/B;QAAA;UAAA;UAAA;UAAA;QAAA,QAHD;MAAA,GAA+IK,CAA/I;QAAA;QAAA;QAAA;MAAA,QADA;IADF;MAAA;MAAA;MAAA;IAAA,QADA,gBAWA;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAbF;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAkBA,CA5CD;;GAAMzB,K;UACeD,e,EAEHD,O;;;KAHZE,K;AA8CN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}