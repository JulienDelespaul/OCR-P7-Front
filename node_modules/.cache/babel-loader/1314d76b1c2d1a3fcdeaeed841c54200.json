{"ast":null,"code":"var _jsxFileName = \"/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Posts.jsx\",\n    _s2 = $RefreshSig$();\n\nimport { useState, useEffect } from \"react\";\nimport axios from \"../Api/axios\";\nimport { useAuth } from \"../hooks/useAuth\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Posts = () => {\n  _s2();\n\n  var _s = $RefreshSig$();\n\n  const [posts, setPosts] = useState();\n  console.log(\"bug ici\");\n\n  _s(useEffect(_s(() => {\n    _s();\n\n    let isMounted = true; // const controller = new AbortController();\n\n    const {\n      auth\n    } = useAuth();\n\n    const getPosts = async () => {\n      try {\n        const response = await axios.get(\"/post\", // pass token in header\n        {\n          headers: {\n            Authorization: `Bearer ${localStorage.getItem(\"token\")}`\n          }\n        } //, { signal: controller.signal}\n        );\n        console.log(response.data);\n        isMounted && setPosts(response.data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n\n    getPosts();\n    return () => {\n      isMounted = false; // controller.abort();\n    };\n  }, \"9G6mHm7vboz57TgCjHTTsyGOOp0=\", false, function () {\n    return [useAuth];\n  }), []), \"9G6mHm7vboz57TgCjHTTsyGOOp0=\", false, function () {\n    return [useAuth];\n  });\n\n  return /*#__PURE__*/_jsxDEV(\"article\", {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Posts List\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 4\n    }, this), posts !== null && posts !== void 0 && posts.length ? /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: posts.map((post, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n        className: \"h-min w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \",\n        children: [post === null || post === void 0 ? void 0 : post.name, /*#__PURE__*/_jsxDEV(\"img\", {\n          src: post === null || post === void 0 ? void 0 : post.imageUrl,\n          alt: post === null || post === void 0 ? void 0 : post.name,\n          className: \"h-96 w-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 8\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 5\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"No posts to display\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 3\n  }, this);\n};\n\n_s2(Posts, \"gNpU8K6D9yXWS6G6mu7mBiUIyfk=\");\n\n_c = Posts;\nexport default Posts;\n\nvar _c;\n\n$RefreshReg$(_c, \"Posts\");","map":{"version":3,"names":["useState","useEffect","axios","useAuth","Posts","posts","setPosts","console","log","isMounted","auth","getPosts","response","get","headers","Authorization","localStorage","getItem","data","error","length","map","post","i","name","imageUrl"],"sources":["/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Posts.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport axios from \"../Api/axios\";\nimport { useAuth } from \"../hooks/useAuth\";\n\nconst Posts = () => {\n\tconst [posts, setPosts] = useState();\n\tconsole.log(\"bug ici\");\n\tuseEffect(() => {\n\t\tlet isMounted = true;\n\t\t// const controller = new AbortController();\n\n\t\tconst { auth } = useAuth();\n\n\t\tconst getPosts = async () => {\n\t\t\ttry {\n\t\t\t\tconst response = await axios.get(\n\t\t\t\t\t\"/post\",\n\t\t\t\t\t// pass token in header\n\t\t\t\t\t{ headers: { Authorization: `Bearer ${localStorage.getItem(\"token\")}` } }\n\n\t\t\t\t\t//, { signal: controller.signal}\n\t\t\t\t);\n\t\t\t\tconsole.log(response.data);\n\t\t\t\tisMounted && setPosts(response.data);\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t}\n\t\t};\n\n\t\tgetPosts();\n\n\t\treturn () => {\n\t\t\tisMounted = false;\n\t\t\t// controller.abort();\n\t\t};\n\t}, []);\n\n\treturn (\n\t\t<article>\n\t\t\t<h2>Posts List</h2>\n\t\t\t{posts?.length ? (\n\t\t\t\t<ul>\n\t\t\t\t\t{posts.map((post, i) => (\n\t\t\t\t\t\t<li className=\"h-min w-full flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \" key={i}>\n\t\t\t\t\t\t\t{post?.name}\n\t\t\t\t\t\t\t<img src={post?.imageUrl} alt={post?.name} className=\"h-96 w-full object-cover\" />\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t) : (\n\t\t\t\t<p>No posts to display</p>\n\t\t\t)}\n\t\t</article>\n\t);\n};\n\nexport default Posts;\n"],"mappings":";;;AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,cAAlB;AACA,SAASC,OAAT,QAAwB,kBAAxB;;;AAEA,MAAMC,KAAK,GAAG,MAAM;EAAA;;EAAA;;EACnB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,EAAlC;EACAO,OAAO,CAACC,GAAR,CAAY,SAAZ;;EACA,GAAAP,SAAS,IAAC,MAAM;IAAA;;IACf,IAAIQ,SAAS,GAAG,IAAhB,CADe,CAEf;;IAEA,MAAM;MAAEC;IAAF,IAAWP,OAAO,EAAxB;;IAEA,MAAMQ,QAAQ,GAAG,YAAY;MAC5B,IAAI;QACH,MAAMC,QAAQ,GAAG,MAAMV,KAAK,CAACW,GAAN,CACtB,OADsB,EAEtB;QACA;UAAEC,OAAO,EAAE;YAAEC,aAAa,EAAG,UAASC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8B;UAAzD;QAAX,CAHsB,CAKtB;QALsB,CAAvB;QAOAV,OAAO,CAACC,GAAR,CAAYI,QAAQ,CAACM,IAArB;QACAT,SAAS,IAAIH,QAAQ,CAACM,QAAQ,CAACM,IAAV,CAArB;MACA,CAVD,CAUE,OAAOC,KAAP,EAAc;QACfZ,OAAO,CAACC,GAAR,CAAYW,KAAZ;MACA;IACD,CAdD;;IAgBAR,QAAQ;IAER,OAAO,MAAM;MACZF,SAAS,GAAG,KAAZ,CADY,CAEZ;IACA,CAHD;EAIA,CA5BQ;IAAA,QAISN,OAJT;EAAA,IA4BN,EA5BM,CAAT;IAAA,QAIkBA,OAJlB;EAAA;;EA8BA,oBACC;IAAA,wBACC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,EAEEE,KAAK,SAAL,IAAAA,KAAK,WAAL,IAAAA,KAAK,CAAEe,MAAP,gBACA;MAAA,UACEf,KAAK,CAACgB,GAAN,CAAU,CAACC,IAAD,EAAOC,CAAP,kBACV;QAAI,SAAS,EAAC,kHAAd;QAAA,WACED,IADF,aACEA,IADF,uBACEA,IAAI,CAAEE,IADR,eAEC;UAAK,GAAG,EAAEF,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEG,QAAhB;UAA0B,GAAG,EAAEH,IAAF,aAAEA,IAAF,uBAAEA,IAAI,CAAEE,IAArC;UAA2C,SAAS,EAAC;QAArD;UAAA;UAAA;UAAA;QAAA,QAFD;MAAA,GAAsID,CAAtI;QAAA;QAAA;QAAA;MAAA,QADA;IADF;MAAA;MAAA;MAAA;IAAA,QADA,gBAUA;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAZF;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAiBA,CAlDD;;IAAMnB,K;;KAAAA,K;AAoDN,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}