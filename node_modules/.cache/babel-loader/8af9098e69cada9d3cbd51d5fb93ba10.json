{"ast":null,"code":"var _jsxFileName = \"/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/PostsPageComponents/PostsPageAddPost.jsx\",\n    _s = $RefreshSig$();\n\nimport \"../Button/button.css\";\nimport { useRef, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"../../Api/axios\";\nimport useAuth from \"../../hooks/useAuth\";\nimport usePostsRefresh from \"../../hooks/usePostsRefresh\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst POST_URL = \"/post\";\n\nconst PostsPageAddPost = () => {\n  _s();\n\n  const {\n    auth\n  } = useAuth();\n  const {\n    refresh,\n    setRefresh\n  } = usePostsRefresh();\n  const ref = useRef();\n\n  const handleClick = e => {\n    e.preventDefault();\n    ref.current.click();\n  };\n\n  const HandleInput = async data => {\n    console.log(data.image[0].name);\n    const formData = new FormData();\n    formData.append(\"image\", data.image[0]);\n    formData.append(\"content\", data.content); // formData.append(\"userId\", auth.userId);\n\n    try {\n      const response = await axios.post(POST_URL, formData, {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n          Authorization: `Bearer ${auth.token}`\n        }\n      });\n      console.log(response); // toggle refresh to trigger useEffect in Posts.jsx\n\n      setRefresh(!refresh);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit(HandleInput),\n    className: \"h-min mt-2 w-full text-lg flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      className: \"pl-4 pt-4 pb-1 font-bold text-primary\",\n      children: \"Exprimez-vous !\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n      className: \"px-4 mx-4 h-32 flex text-wrap bg-secondary text-tertiary  border-1 border-black resize-none\",\n      placeholder: \"...\",\n      type: \"text\",\n      name: \"content\",\n      ...register(\"content\")\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          ref: ref,\n          type: \"file\",\n          name: \"image\",\n          ...register(\"image\")\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleClick,\n          className: \"brutal-btn m-4\",\n          children: \"Ajouter une image\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"brutal-btn m-4\",\n        children: \"Poster\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 3\n  }, this);\n};\n\n_s(PostsPageAddPost, \"wtc8z9buHMWrNaOs0YqerrmvJgU=\", false, function () {\n  return [useAuth, usePostsRefresh, useForm];\n});\n\n_c = PostsPageAddPost;\nexport default PostsPageAddPost;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostsPageAddPost\");","map":{"version":3,"names":["useRef","useState","useForm","axios","useAuth","usePostsRefresh","POST_URL","PostsPageAddPost","auth","refresh","setRefresh","ref","handleClick","e","preventDefault","current","click","HandleInput","data","console","log","image","name","formData","FormData","append","content","response","post","headers","Authorization","token","error","register","handleSubmit"],"sources":["/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/PostsPageComponents/PostsPageAddPost.jsx"],"sourcesContent":["import \"../Button/button.css\";\nimport { useRef, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"../../Api/axios\";\nimport useAuth from \"../../hooks/useAuth\";\nimport usePostsRefresh from \"../../hooks/usePostsRefresh\";\n\nconst POST_URL = \"/post\";\n\nconst PostsPageAddPost = () => {\n\tconst { auth } = useAuth();\n\tconst { refresh, setRefresh } = usePostsRefresh();\n\tconst ref = useRef();\n\tconst handleClick = (e) => {\n\t\te.preventDefault();\n\t\tref.current.click();\n\t};\n\n\tconst HandleInput = async (data) => {\n\t\tconsole.log(data.image[0].name);\n\t\tconst formData = new FormData();\n\t\tformData.append(\"image\", data.image[0]);\n\t\tformData.append(\"content\", data.content);\n\t\t// formData.append(\"userId\", auth.userId);\n\t\ttry {\n\t\t\tconst response = await axios.post(POST_URL, formData, {\n\t\t\t\theaders: {\n\t\t\t\t\t\"Content-Type\": \"multipart/form-data\",\n\t\t\t\t\tAuthorization: `Bearer ${auth.token}`,\n\t\t\t\t},\n\t\t\t});\n\t\t\tconsole.log(response);\n\t\t\t// toggle refresh to trigger useEffect in Posts.jsx\n\t\t\tsetRefresh(!refresh);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\tconst { register, handleSubmit } = useForm();\n\n\treturn (\n\t\t<form\n\t\t\tonSubmit={handleSubmit(HandleInput)}\n\t\t\tclassName=\"h-min mt-2 w-full text-lg flex flex-col justify-between object-top border-2 border-primary border-b-8 border-r-8 rounded-2xl \"\n\t\t>\n\t\t\t<label className=\"pl-4 pt-4 pb-1 font-bold text-primary\">Exprimez-vous !</label>\n\t\t\t<textarea\n\t\t\t\tclassName=\"px-4 mx-4 h-32 flex text-wrap bg-secondary text-tertiary  border-1 border-black resize-none\"\n\t\t\t\tplaceholder=\"...\"\n\t\t\t\ttype=\"text\"\n\t\t\t\tname=\"content\"\n\t\t\t\t{...register(\"content\")}\n\t\t\t/>\n\t\t\t<div className=\"flex justify-end\">\n\t\t\t\t<div>\n\t\t\t\t\t<input ref={ref} type=\"file\" name=\"image\" {...register(\"image\")} />\n\t\t\t\t\t<button onClick={handleClick} className=\"brutal-btn m-4\">\n\t\t\t\t\t\tAjouter une image\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t\t<button className=\"brutal-btn m-4\">Poster</button>\n\t\t\t</div>\n\t\t</form>\n\t);\n};\n\nexport default PostsPageAddPost;\n"],"mappings":";;;AAAA,OAAO,sBAAP;AACA,SAASA,MAAT,EAAiBC,QAAjB,QAAiC,OAAjC;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,eAAP,MAA4B,6BAA5B;;AAEA,MAAMC,QAAQ,GAAG,OAAjB;;AAEA,MAAMC,gBAAgB,GAAG,MAAM;EAAA;;EAC9B,MAAM;IAAEC;EAAF,IAAWJ,OAAO,EAAxB;EACA,MAAM;IAAEK,OAAF;IAAWC;EAAX,IAA0BL,eAAe,EAA/C;EACA,MAAMM,GAAG,GAAGX,MAAM,EAAlB;;EACA,MAAMY,WAAW,GAAIC,CAAD,IAAO;IAC1BA,CAAC,CAACC,cAAF;IACAH,GAAG,CAACI,OAAJ,CAAYC,KAAZ;EACA,CAHD;;EAKA,MAAMC,WAAW,GAAG,MAAOC,IAAP,IAAgB;IACnCC,OAAO,CAACC,GAAR,CAAYF,IAAI,CAACG,KAAL,CAAW,CAAX,EAAcC,IAA1B;IACA,MAAMC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;IACAD,QAAQ,CAACE,MAAT,CAAgB,OAAhB,EAAyBP,IAAI,CAACG,KAAL,CAAW,CAAX,CAAzB;IACAE,QAAQ,CAACE,MAAT,CAAgB,SAAhB,EAA2BP,IAAI,CAACQ,OAAhC,EAJmC,CAKnC;;IACA,IAAI;MACH,MAAMC,QAAQ,GAAG,MAAMxB,KAAK,CAACyB,IAAN,CAAWtB,QAAX,EAAqBiB,QAArB,EAA+B;QACrDM,OAAO,EAAE;UACR,gBAAgB,qBADR;UAERC,aAAa,EAAG,UAAStB,IAAI,CAACuB,KAAM;QAF5B;MAD4C,CAA/B,CAAvB;MAMAZ,OAAO,CAACC,GAAR,CAAYO,QAAZ,EAPG,CAQH;;MACAjB,UAAU,CAAC,CAACD,OAAF,CAAV;IACA,CAVD,CAUE,OAAOuB,KAAP,EAAc;MACfb,OAAO,CAACC,GAAR,CAAYY,KAAZ;IACA;EACD,CAnBD;;EAoBA,MAAM;IAAEC,QAAF;IAAYC;EAAZ,IAA6BhC,OAAO,EAA1C;EAEA,oBACC;IACC,QAAQ,EAAEgC,YAAY,CAACjB,WAAD,CADvB;IAEC,SAAS,EAAC,+HAFX;IAAA,wBAIC;MAAO,SAAS,EAAC,uCAAjB;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAJD,eAKC;MACC,SAAS,EAAC,6FADX;MAEC,WAAW,EAAC,KAFb;MAGC,IAAI,EAAC,MAHN;MAIC,IAAI,EAAC,SAJN;MAAA,GAKKgB,QAAQ,CAAC,SAAD;IALb;MAAA;MAAA;MAAA;IAAA,QALD,eAYC;MAAK,SAAS,EAAC,kBAAf;MAAA,wBACC;QAAA,wBACC;UAAO,GAAG,EAAEtB,GAAZ;UAAiB,IAAI,EAAC,MAAtB;UAA6B,IAAI,EAAC,OAAlC;UAAA,GAA8CsB,QAAQ,CAAC,OAAD;QAAtD;UAAA;UAAA;UAAA;QAAA,QADD,eAEC;UAAQ,OAAO,EAAErB,WAAjB;UAA8B,SAAS,EAAC,gBAAxC;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAFD;MAAA;QAAA;QAAA;QAAA;MAAA,QADD,eAOC;QAAQ,SAAS,EAAC,gBAAlB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAPD;IAAA;MAAA;MAAA;MAAA;IAAA,QAZD;EAAA;IAAA;IAAA;IAAA;EAAA,QADD;AAwBA,CAvDD;;GAAML,gB;UACYH,O,EACeC,e,EA2BGH,O;;;KA7B9BK,gB;AAyDN,eAAeA,gBAAf"},"metadata":{},"sourceType":"module"}