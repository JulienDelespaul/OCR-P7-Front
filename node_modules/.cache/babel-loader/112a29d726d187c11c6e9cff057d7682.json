{"ast":null,"code":"var _jsxFileName = \"/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Button/LikeButton.jsx\",\n    _s = $RefreshSig$();\n\nimport { useEffect, useState } from \"react\";\nimport axios from \"../../Api/axios\";\nimport useAuth from \"../../hooks/useAuth\";\nimport usePostsRefresh from \"../../hooks/usePostsRefresh\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst LikeButton = _ref => {\n  _s();\n\n  let {\n    post\n  } = _ref;\n  const [isLiked, setIsLiked] = useState();\n  const {\n    auth\n  } = useAuth();\n  console.log(post.usersLiked.includes(auth.userId));\n  const userLike = post.usersLiked.includes(auth.userId);\n  const {\n    refresh,\n    setRefresh\n  } = usePostsRefresh();\n  useEffect(() => {\n    setIsLiked(userLike);\n  }, [userLike]);\n\n  const handleLike = async () => {\n    setIsLiked(!isLiked);\n    const formatedUserLike = isLiked ? 0 : 1;\n    const id = post._id;\n    const userId = auth.userId;\n\n    try {\n      const response = await axios.post(`/post/${id}/like`, {\n        userId,\n        like: formatedUserLike\n      }, {\n        headers: {\n          Authorization: `Bearer ${auth.token}`\n        }\n      });\n      console.log(response.data);\n      setRefresh(!refresh);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleLike,\n    className: isLiked ? \"transition-all fill-primary hover:scale-125 active:scale-90\" : \" hover:scale-125 active:scale-90 transition-all\",\n    children: /*#__PURE__*/_jsxDEV(\"svg\", {\n      className: \"w-8 h-6 flex-shrink\",\n      xmlns: \"http://www.w3.org/2000/svg\",\n      xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n      viewBox: \"0 0 179.006 179.006\",\n      children: [/*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M5.096,94.473h23.987v60.54H5.096V94.473z M95.082,40.079v49.125h36.553v60.54\\nl-11.796,11.796H82.504l-23.587-12.19H34.172v-48.356h24.745l23.969-60.922L95.082,40.079L95.082,40.079z M34.178,95.923v-1.432\\nc0-2.816-2.279-5.096-5.096-5.096H5.096C2.285,89.396,0,91.675,0,94.491v60.54c0,2.816,2.279,5.096,5.096,5.096h23.987\\nc2.81,0,5.096-2.279,5.096-5.096v-0.65h23.474l22.567,11.713c0.71,0.364,1.498,0.543,2.291,0.537h37.329\\nc1.36,0,2.643-0.537,3.604-1.492l11.796-11.797c0.967-0.961,1.504-2.261,1.492-3.61v-60.54c0-2.81-2.446-5.078-5.245-5.078\\nh-31.314V40.061c0-2.81-2.273-5.096-5.09-5.096c-0.054,0-0.113,0-0.155,0h-12.19c-2.041,0.06-3.843,3.192-4.583,5.09\\nl-22.68,55.862\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"path\", {\n        d: \"M173.916,12.375H16.439c-2.81,0-5.096,2.279-5.096,5.096v68.601h5.096V17.471h157.478v107.941\\nh-33.719v5.09h33.719c2.816,0,5.09-2.279,5.09-5.09V17.471C179.006,14.655,176.733,12.375,173.916,12.375z\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 3\n  }, this);\n};\n\n_s(LikeButton, \"Lr2BRfujA+km1+313qLj/8mQNXY=\", false, function () {\n  return [useAuth, usePostsRefresh];\n});\n\n_c = LikeButton;\nexport default LikeButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"LikeButton\");","map":{"version":3,"names":["useEffect","useState","axios","useAuth","usePostsRefresh","LikeButton","post","isLiked","setIsLiked","auth","console","log","usersLiked","includes","userId","userLike","refresh","setRefresh","handleLike","formatedUserLike","id","_id","response","like","headers","Authorization","token","data","error"],"sources":["/home/julien/Dropbox/Formation OpenClassroom/Projet 7/code/FRONTEND/src/components/Button/LikeButton.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport axios from \"../../Api/axios\";\nimport useAuth from \"../../hooks/useAuth\";\nimport usePostsRefresh from \"../../hooks/usePostsRefresh\";\n\nconst LikeButton = ({ post }) => {\n\tconst [isLiked, setIsLiked] = useState();\n\tconst { auth } = useAuth();\n\tconsole.log(post.usersLiked.includes(auth.userId));\n\tconst userLike = post.usersLiked.includes(auth.userId);\n\tconst { refresh, setRefresh } = usePostsRefresh();\n\n\tuseEffect(() => {\n\t\tsetIsLiked(userLike);\n\t}, [userLike]);\n\n\tconst handleLike = async () => {\n\t\tsetIsLiked(!isLiked);\n\t\tconst formatedUserLike = isLiked ? 0 : 1;\n\t\tconst id = post._id;\n\t\tconst userId = auth.userId;\n\t\ttry {\n\t\t\tconst response = await axios.post(`/post/${id}/like`, { userId, like: formatedUserLike }, { headers: { Authorization: `Bearer ${auth.token}` } });\n\t\t\tconsole.log(response.data);\n\t\t\tsetRefresh(!refresh);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t};\n\n\treturn (\n\t\t<button\n\t\t\tonClick={handleLike}\n\t\t\tclassName={isLiked ? \"transition-all fill-primary hover:scale-125 active:scale-90\" : \" hover:scale-125 active:scale-90 transition-all\"}\n\t\t>\n\t\t\t<svg className=\"w-8 h-6 flex-shrink\" xmlns=\"http://www.w3.org/2000/svg\" xmlnsXlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 179.006 179.006\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M5.096,94.473h23.987v60.54H5.096V94.473z M95.082,40.079v49.125h36.553v60.54\nl-11.796,11.796H82.504l-23.587-12.19H34.172v-48.356h24.745l23.969-60.922L95.082,40.079L95.082,40.079z M34.178,95.923v-1.432\nc0-2.816-2.279-5.096-5.096-5.096H5.096C2.285,89.396,0,91.675,0,94.491v60.54c0,2.816,2.279,5.096,5.096,5.096h23.987\nc2.81,0,5.096-2.279,5.096-5.096v-0.65h23.474l22.567,11.713c0.71,0.364,1.498,0.543,2.291,0.537h37.329\nc1.36,0,2.643-0.537,3.604-1.492l11.796-11.797c0.967-0.961,1.504-2.261,1.492-3.61v-60.54c0-2.81-2.446-5.078-5.245-5.078\nh-31.314V40.061c0-2.81-2.273-5.096-5.09-5.096c-0.054,0-0.113,0-0.155,0h-12.19c-2.041,0.06-3.843,3.192-4.583,5.09\nl-22.68,55.862\"\n\t\t\t\t/>\n\t\t\t\t<path\n\t\t\t\t\td=\"M173.916,12.375H16.439c-2.81,0-5.096,2.279-5.096,5.096v68.601h5.096V17.471h157.478v107.941\nh-33.719v5.09h33.719c2.816,0,5.09-2.279,5.09-5.09V17.471C179.006,14.655,176.733,12.375,173.916,12.375z\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</button>\n\t);\n};\n\nexport default LikeButton;\n"],"mappings":";;;AAAA,SAASA,SAAT,EAAoBC,QAApB,QAAoC,OAApC;AACA,OAAOC,KAAP,MAAkB,iBAAlB;AACA,OAAOC,OAAP,MAAoB,qBAApB;AACA,OAAOC,eAAP,MAA4B,6BAA5B;;;AAEA,MAAMC,UAAU,GAAG,QAAc;EAAA;;EAAA,IAAb;IAAEC;EAAF,CAAa;EAChC,MAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBP,QAAQ,EAAtC;EACA,MAAM;IAAEQ;EAAF,IAAWN,OAAO,EAAxB;EACAO,OAAO,CAACC,GAAR,CAAYL,IAAI,CAACM,UAAL,CAAgBC,QAAhB,CAAyBJ,IAAI,CAACK,MAA9B,CAAZ;EACA,MAAMC,QAAQ,GAAGT,IAAI,CAACM,UAAL,CAAgBC,QAAhB,CAAyBJ,IAAI,CAACK,MAA9B,CAAjB;EACA,MAAM;IAAEE,OAAF;IAAWC;EAAX,IAA0Bb,eAAe,EAA/C;EAEAJ,SAAS,CAAC,MAAM;IACfQ,UAAU,CAACO,QAAD,CAAV;EACA,CAFQ,EAEN,CAACA,QAAD,CAFM,CAAT;;EAIA,MAAMG,UAAU,GAAG,YAAY;IAC9BV,UAAU,CAAC,CAACD,OAAF,CAAV;IACA,MAAMY,gBAAgB,GAAGZ,OAAO,GAAG,CAAH,GAAO,CAAvC;IACA,MAAMa,EAAE,GAAGd,IAAI,CAACe,GAAhB;IACA,MAAMP,MAAM,GAAGL,IAAI,CAACK,MAApB;;IACA,IAAI;MACH,MAAMQ,QAAQ,GAAG,MAAMpB,KAAK,CAACI,IAAN,CAAY,SAAQc,EAAG,OAAvB,EAA+B;QAAEN,MAAF;QAAUS,IAAI,EAAEJ;MAAhB,CAA/B,EAAmE;QAAEK,OAAO,EAAE;UAAEC,aAAa,EAAG,UAAShB,IAAI,CAACiB,KAAM;QAAtC;MAAX,CAAnE,CAAvB;MACAhB,OAAO,CAACC,GAAR,CAAYW,QAAQ,CAACK,IAArB;MACAV,UAAU,CAAC,CAACD,OAAF,CAAV;IACA,CAJD,CAIE,OAAOY,KAAP,EAAc;MACflB,OAAO,CAACC,GAAR,CAAYiB,KAAZ;IACA;EACD,CAZD;;EAcA,oBACC;IACC,OAAO,EAAEV,UADV;IAEC,SAAS,EAAEX,OAAO,GAAG,6DAAH,GAAmE,iDAFtF;IAAA,uBAIC;MAAK,SAAS,EAAC,qBAAf;MAAqC,KAAK,EAAC,4BAA3C;MAAwE,UAAU,EAAC,8BAAnF;MAAkH,OAAO,EAAC,qBAA1H;MAAA,wBACC;QACC,CAAC,EAAC;MADH;QAAA;QAAA;QAAA;MAAA,QADD,eAUC;QACC,CAAC,EAAC;MADH;QAAA;QAAA;QAAA;MAAA,QAVD;IAAA;MAAA;MAAA;MAAA;IAAA;EAJD;IAAA;IAAA;IAAA;EAAA,QADD;AAsBA,CA/CD;;GAAMF,U;UAEYF,O,EAGeC,e;;;KAL3BC,U;AAiDN,eAAeA,UAAf"},"metadata":{},"sourceType":"module"}